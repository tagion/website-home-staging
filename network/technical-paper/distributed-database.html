<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Distributed Database (DART) | Tagion</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico"><link rel='canonical' href='https://tagion.org/network/technical-paper/distributed-database'/>
    <meta name="description" content="Tagion is an open banking protocol, that enables digital peer-to-peer cryptocurrency and a decentralized exchange, governed by its users. By design, Tagion network has no central authority and belongs to all its users. It will be open-sourced and open for everyone to join once the software is ready.">
    <meta property="og:site_name" content="Tagion">
    <meta property="og:title" content="Distributed Database (DART)">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/network/technical-paper/distributed-database.html">
    <meta property="og:image" content="/logomark-square-black.png">
    <meta name="twitter:title" content="Distributed Database (DART)">
    <meta name="twitter:url" content="/network/technical-paper/distributed-database.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/logomark-square-black.png">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=6,maximum-scale=1">
    <meta name="twitter:creator" content="@tagionorg">
    
    <link rel="preload" href="/assets/css/0.styles.8ad25382.css" as="style"><link rel="preload" href="/assets/js/app.de1a5775.js" as="script"><link rel="preload" href="/assets/js/3.11e49819.js" as="script"><link rel="preload" href="/assets/js/1.d48fd14e.js" as="script"><link rel="preload" href="/assets/js/22.6d4a8134.js" as="script"><link rel="prefetch" href="/assets/js/10.99f89005.js"><link rel="prefetch" href="/assets/js/11.88a39968.js"><link rel="prefetch" href="/assets/js/12.757d5a6b.js"><link rel="prefetch" href="/assets/js/13.8a7c4cff.js"><link rel="prefetch" href="/assets/js/14.958a134d.js"><link rel="prefetch" href="/assets/js/15.e1324f44.js"><link rel="prefetch" href="/assets/js/16.b3507e28.js"><link rel="prefetch" href="/assets/js/17.e7566715.js"><link rel="prefetch" href="/assets/js/18.fae5c0c1.js"><link rel="prefetch" href="/assets/js/19.aa894723.js"><link rel="prefetch" href="/assets/js/20.782980c2.js"><link rel="prefetch" href="/assets/js/21.f7a837df.js"><link rel="prefetch" href="/assets/js/23.5f8bb4b0.js"><link rel="prefetch" href="/assets/js/24.b7f598cc.js"><link rel="prefetch" href="/assets/js/25.9f2d45e3.js"><link rel="prefetch" href="/assets/js/26.02fc2bc6.js"><link rel="prefetch" href="/assets/js/27.e910d708.js"><link rel="prefetch" href="/assets/js/28.dd04e3ed.js"><link rel="prefetch" href="/assets/js/29.cf05ed07.js"><link rel="prefetch" href="/assets/js/30.405bc2cc.js"><link rel="prefetch" href="/assets/js/31.8d1e1838.js"><link rel="prefetch" href="/assets/js/32.2f7d7457.js"><link rel="prefetch" href="/assets/js/33.c0d37302.js"><link rel="prefetch" href="/assets/js/34.c246b386.js"><link rel="prefetch" href="/assets/js/35.2406480b.js"><link rel="prefetch" href="/assets/js/36.aa2a31ca.js"><link rel="prefetch" href="/assets/js/37.e5553263.js"><link rel="prefetch" href="/assets/js/38.39ce1ef6.js"><link rel="prefetch" href="/assets/js/39.4c20e622.js"><link rel="prefetch" href="/assets/js/4.76789837.js"><link rel="prefetch" href="/assets/js/40.ed651472.js"><link rel="prefetch" href="/assets/js/41.94b069cc.js"><link rel="prefetch" href="/assets/js/5.2be2beaa.js"><link rel="prefetch" href="/assets/js/6.0593e263.js"><link rel="prefetch" href="/assets/js/7.b0d9fce3.js"><link rel="prefetch" href="/assets/js/8.fdfaa925.js"><link rel="prefetch" href="/assets/js/9.711b4c76.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ad25382.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="wrapper" class="layout-page has-sidebar"><div class="layout-header"><header id="header" class="header"><div class="d-flex justify-content-between container"><div class="header-logo__wrapper"><a href="/" class="logo__wrapper router-link-active"><img src="/logomark-circle-black.svg" alt="Tagion Logo" class="logo__logo"> <div class="logo__title"><div class="logo__title-name">Tagion</div> <div class="logo__title-sub">Money for #NetworkEconomy</div></div></a></div> <div class="header__menu justify-content-end"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class="form-control"> <!----></div> <ul class="nav d-none d-lg-flex"><li><a href="/network/" class="nav-link router-link-active">Network</a></li><li><a href="/money/" class="nav-link">Money</a></li></ul></div></div></header></div> <div class="layout-body"><div class="d-flex container"><div class="layout-content"><main class="page"><div class="typography"><div class="content__default"><h1 id="distributed-database-dart"><a href="#distributed-database-dart" class="header-anchor"></a> Distributed Database (DART)</h1> <p>Distributed Archive of Random Transactions (DART) is built to store and keep track of transactions in the Tagion network. The database efficiently handles the removal and addition of transactions in a secure and distributed manner. Each transaction is stored in a distributed hash-table using a cryptographic hash of the transaction T data. Each transaction is identified by a unique hash value h. The transaction is put into a table ordered by the numerical value of the hash.</p> <p><img alt="" data-src="https://i.imgur.com/B3uxfuq.png" loading="lazy" class="lazy"></p> <p><img alt="" data-src="https://i.imgur.com/N91CslI.png" loading="lazy" class="lazy"></p> <p><strong>H</strong> is the cryptography hash function
<strong>N</strong> represents the number of bits
<strong>M</strong> represents the bit witdh of the sector
<strong>h</strong> hash value
<strong>S</strong> is sections
<strong>m</strong> hash-table divided into sections S</p> <p><strong>The structure of the DART database</strong></p> <p><img alt="" data-src="https://i.imgur.com/HMkqFUR.png" loading="lazy" class="lazy"></p> <p>The hash-table is distributed between the nodes in the network, where each node manages a sample of sections. A section must be managed by more than Q nodes to keep redundancy and security of the data. Each node must maintain the database sections within the nodes section angle. This means adding and removing the transaction and updating the Merkle-tree root of the section hash. The DART is updated according to the transaction list in an epoch generated by the network. The scripting engine will evaluate actions in the epoch and decide if an archive should be added, removed, or selected. Selection of an archive means that the archive is sent back to the network and deleted from the DART. When a node updates a section, it must calculate the Section Merkle-root, sign it, and send it to the network. The signed section and the selected archive are distributed to the network via the gossip protocol. Each node will collect all the signed roots of the updated section when the majority has been reached for all updated sections.</p> <p>The node must calculate the Bull’s eye (Merkle root) of the DART and sign and distribute the information via the gossip protocol. When most of the nodes in the network have reached a consensus of the Bull’s eye value, the DART is considered updated. If no consensus has been reached for DART, the current transaction in the epoch must be dropped, and the DART must revert to the previous state. The Bull’s eye value is stored in a hash-linked chain of blocks where each block points to the previous block’s hash. Each block contains the Bull’s eye pointer and a block number. It ensures data integrity, the state of the database. The concept is shown below.</p> <p><img alt="" data-src="https://i.imgur.com/litR4w1.png" loading="lazy" class="lazy"></p> <h2 id="sparse-merkle-tree"><a href="#sparse-merkle-tree" class="header-anchor"></a> Sparse Merkle Tree</h2> <p>The data in a section is mapped using a Sparse Merkle Tree (SMT), making it efficient to add and remove archives into the Merkle tree.
The hash point into the DART is divided by rims. Rim zero is the most significant byte (MSB) of the hash fingerprint of the archive. Rim one is the next byte in the hash etc.
In the current implementation of the DART, the first two rims are used as the section index.
Thus the DART has a total number of indices <img alt="" data-src="https://i.imgur.com/70DJZfd.png" loading="lazy" class="lazy"> which is equivalent to the two bytes unsigned number.
Each section stores the archive in a hash table. An SMT is used as a look-up table, and each rim is sectioned into a sub sparse Merkle tree. It means that rim two is the first SMT and rim three is the second SMT etc.
As a comparison, a traditional Merkle tree with <img alt="" data-src="https://i.imgur.com/ELvMoF6.png" loading="lazy" class="lazy"> Archives. To calculate a full Merkle tree, it requires the calculation of around<img alt="" data-src="https://i.imgur.com/QYZBvc3.png" loading="lazy" class="lazy"> hashes. By contrast, using an SMT with<img alt="" data-src="https://i.imgur.com/gRZPQyV.png" loading="lazy" class="lazy">archives mean just around 2000 hashes have to be calculated.</p> <h3 id="core-protocol-updates"><a href="#core-protocol-updates" class="header-anchor"></a> Core protocol updates</h3> <p>The DART will be used for protocol updates by the following consensus. One or more nodes will need to run the new protocol update in a parallel DART containing the same transaction information as the current accepted DART. The new DART will have a new Bull’s eye, resulting in a fork of the Bull’s eye chain. When the majority of the nodes run the newly upgraded nodes, they can decide to drop support for the old DART and run the new DART. When enough nodes stop running the old DART, it will not reach a consensus, and the upgrade has been completed.</p> <h3 id="dart-garbage-collection"><a href="#dart-garbage-collection" class="header-anchor"></a> DART garbage collection</h3> <p>A garbage collection script will run every (G) epoch and remove all the bills older than a specified date. Bills that have not been used for a long period will be burned, ensuring that the system does not contain dead bills/money. It is the owner’s responsibility to recycle their bills before the expiry date.</p></div> <div class="forkbox"><div><span>Last edit:</span> <span class="forkbox__secondary-date">November 09, 2021</span></div> <div class="forkbox__secondary"><a href="https://github.com/tagion/homepage/blob/release/docs/network/technical-paper/distributed-database.md" target="_blank" title="Edit on Github"><span>Edit on GitHub</span> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></div></div> </main></div></div> <div class="layout-sidebar"><div class="sidebar layout-sidebar__inner"><div class="sidebar__inner"><ul class="nav d-flex d-lg-none"><li><a href="/network/" class="nav-link router-link-active">Network</a></li><li><a href="/money/" class="nav-link">Money</a></li></ul>  <ul class="nav sidebar-links flex-column"><!----> <!----> <li><a href="/network/" aria-current="page" class="sidebar-link">Welcome</a></li><li><a href="/network/communities.html" class="sidebar-link">Community</a></li><li><a href="/network/faq.html" class="sidebar-link">FAQ</a></li><li><section class="sidebar-group collapsable is-sub-group depth-undefined"><p class="sidebar-heading open"><span>Technical Overview</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/network/technical-paper/" aria-current="page" class="sidebar-link">Intro</a></li><li><a href="/network/technical-paper/governance.html" class="sidebar-link">Governance</a></li><li><a href="/network/technical-paper/node-governance.html" class="sidebar-link">Node Governance</a></li><li><a href="/network/technical-paper/economic-governance.html" class="sidebar-link">Economic Governance</a></li><li><a href="/network/technical-paper/system-upgrade-governance.html" class="sidebar-link">System Upgrade Governance</a></li><li><a href="/network/technical-paper/common-resources.html" class="sidebar-link">Common Resources</a></li><li><a href="/network/technical-paper/hashgraph-consensus-mechanism.html" class="sidebar-link">Hashgraph Consensus Mechanism</a></li><li><a href="/network/technical-paper/distributed-database.html" aria-current="page" class="active sidebar-link">Distributed Database (DART)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/network/technical-paper/distributed-database.html#sparse-merkle-tree" class="sidebar-link">Sparse Merkle Tree</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/network/technical-paper/distributed-database.html#core-protocol-updates" class="sidebar-link">Core protocol updates</a></li><li class="sidebar-sub-header"><a href="/network/technical-paper/distributed-database.html#dart-garbage-collection" class="sidebar-link">DART garbage collection</a></li></ul></li></ul></li><li><a href="/network/technical-paper/special-records.html" class="sidebar-link">Special Records</a></li><li><a href="/network/technical-paper/scripting-engine.html" class="sidebar-link">Scripting Engine</a></li><li><a href="/network/technical-paper/business-model.html" class="sidebar-link">Business Model</a></li><li><a href="/network/technical-paper/parallelism.html" class="sidebar-link">Parallelism</a></li><li><a href="/network/technical-paper/node-stack.html" class="sidebar-link">Node Stack</a></li><li><a href="/network/technical-paper/privacy.html" class="sidebar-link">Privacy</a></li><li><a href="/network/technical-paper/decentralised-exchange-using-lightning-network.html" class="sidebar-link">Decentralised Exchange using Lightning Network</a></li><li><a href="/network/technical-paper/hibon-data-format.html" class="sidebar-link">HiBON Data format</a></li><li><a href="/network/technical-paper/hrpc-hibon-remote-procedure-call.html" class="sidebar-link">HRPC – HiBON Remote Procedure Call</a></li><li><a href="/network/technical-paper/crypto-bank-bill.html" class="sidebar-link">Crypto “Bank” bill</a></li><li><a href="/network/technical-paper/network.html" class="sidebar-link">network</a></li><li><a href="/network/technical-paper/network-security.html" class="sidebar-link">Network Security</a></li><li><a href="/network/technical-paper/dex-trading-example.html" class="sidebar-link">DEX Trading Example</a></li><li><a href="/network/technical-paper/dex-after-the-trading-match.html" class="sidebar-link">DEX After the Trading Match</a></li><li><a href="/network/technical-paper/gene-distance.html" class="sidebar-link">Gene Distance</a></li><li><a href="/network/technical-paper/list-of-abbreviations.html" class="sidebar-link">List of Abbreviations</a></li><li><a href="/network/technical-paper/references.html" class="sidebar-link">References</a></li></ul></section></li></ul> </div></div></div></div> <div class="layout-footer-nav"><div class="container"><div class="page-nav"><p class="inner"><span class="prev"><div class="nav-label">Previous article</div> <a href="/network/technical-paper/hashgraph-consensus-mechanism.html" class="prev">Hashgraph Consensus Mechanism</a></span> <span class="next"><div class="nav-label">Next article</div> <a href="/network/technical-paper/special-records.html">Special Records</a></span></p></div></div></div> <div class="layout-footer"><footer class="footer"><div class="container"><span class="copyright">© All rights reserved, Tagion GmbH</span> <div class="links"><a href="/contacts">Contact Us</a> <a href="/press">For Press</a></div></div> <script src="https://cdn.usefathom.com/script.js" data-spa="auto" data-site="PXTICOGF" defer="defer"></script></footer></div> <div class="layout-sidebar-button"><div class="icon menu-icon"><svg viewBox="0 0 926.23699 573.74994" version="1.1" x="0px" y="0px" width="15" height="15" class="menu-icon__bottom"><g transform="translate(904.92214,-879.1482)"><path d="
        m -673.67664,1221.6502 -231.2455,-231.24803 55.6165,
        -55.627 c 30.5891,-30.59485 56.1806,-55.627 56.8701,-55.627 0.6894,
        0 79.8637,78.60862 175.9427,174.68583 l 174.6892,174.6858 174.6892,
        -174.6858 c 96.079,-96.07721 175.253196,-174.68583 175.942696,
        -174.68583 0.6895,0 26.281,25.03215 56.8701,
        55.627 l 55.6165,55.627 -231.245496,231.24803 c -127.185,127.1864
        -231.5279,231.248 -231.873,231.248 -0.3451,0 -104.688,
        -104.0616 -231.873,-231.248 z
      "></path></g></svg> <svg viewBox="0 0 926.23699 573.74994" version="1.1" x="0px" y="0px" width="15" height="15" class="menu-icon__top"><g transform="translate(904.92214,-879.1482)"><path d="
        m -673.67664,1221.6502 -231.2455,-231.24803 55.6165,
        -55.627 c 30.5891,-30.59485 56.1806,-55.627 56.8701,-55.627 0.6894,
        0 79.8637,78.60862 175.9427,174.68583 l 174.6892,174.6858 174.6892,
        -174.6858 c 96.079,-96.07721 175.253196,-174.68583 175.942696,
        -174.68583 0.6895,0 26.281,25.03215 56.8701,
        55.627 l 55.6165,55.627 -231.245496,231.24803 c -127.185,127.1864
        -231.5279,231.248 -231.873,231.248 -0.3451,0 -104.688,
        -104.0616 -231.873,-231.248 z
      "></path></g></svg></div> <div class="layout-sidebar-button__text">
    Menu
  </div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.de1a5775.js" defer></script><script src="/assets/js/3.11e49819.js" defer></script><script src="/assets/js/1.d48fd14e.js" defer></script><script src="/assets/js/22.6d4a8134.js" defer></script>
  </body>
</html>
