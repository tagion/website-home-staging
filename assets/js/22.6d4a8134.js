(this.webpackJsonp=this.webpackJsonp||[]).push([[22],{405:function(e,t,a){"use strict";a.r(t);var s=a(32),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"distributed-database-dart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#distributed-database-dart"}}),e._v(" Distributed Database (DART)")]),e._v(" "),a("p",[e._v("Distributed Archive of Random Transactions (DART) is built to store and keep track of transactions in the Tagion network. The database efficiently handles the removal and addition of transactions in a secure and distributed manner. Each transaction is stored in a distributed hash-table using a cryptographic hash of the transaction T data. Each transaction is identified by a unique hash value h. The transaction is put into a table ordered by the numerical value of the hash.")]),e._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/B3uxfuq.png",loading:"lazy"}})]),e._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/N91CslI.png",loading:"lazy"}})]),e._v(" "),a("p",[a("strong",[e._v("H")]),e._v(" is the cryptography hash function\n"),a("strong",[e._v("N")]),e._v(" represents the number of bits\n"),a("strong",[e._v("M")]),e._v(" represents the bit witdh of the sector\n"),a("strong",[e._v("h")]),e._v(" hash value\n"),a("strong",[e._v("S")]),e._v(" is sections\n"),a("strong",[e._v("m")]),e._v(" hash-table divided into sections S")]),e._v(" "),a("p",[a("strong",[e._v("The structure of the DART database")])]),e._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/HMkqFUR.png",loading:"lazy"}})]),e._v(" "),a("p",[e._v("The hash-table is distributed between the nodes in the network, where each node manages a sample of sections. A section must be managed by more than Q nodes to keep redundancy and security of the data. Each node must maintain the database sections within the nodes section angle. This means adding and removing the transaction and updating the Merkle-tree root of the section hash. The DART is updated according to the transaction list in an epoch generated by the network. The scripting engine will evaluate actions in the epoch and decide if an archive should be added, removed, or selected. Selection of an archive means that the archive is sent back to the network and deleted from the DART. When a node updates a section, it must calculate the Section Merkle-root, sign it, and send it to the network. The signed section and the selected archive are distributed to the network via the gossip protocol. Each node will collect all the signed roots of the updated section when the majority has been reached for all updated sections.")]),e._v(" "),a("p",[e._v("The node must calculate the Bull’s eye (Merkle root) of the DART and sign and distribute the information via the gossip protocol. When most of the nodes in the network have reached a consensus of the Bull’s eye value, the DART is considered updated. If no consensus has been reached for DART, the current transaction in the epoch must be dropped, and the DART must revert to the previous state. The Bull’s eye value is stored in a hash-linked chain of blocks where each block points to the previous block’s hash. Each block contains the Bull’s eye pointer and a block number. It ensures data integrity, the state of the database. The concept is shown below.")]),e._v(" "),a("p",[a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/litR4w1.png",loading:"lazy"}})]),e._v(" "),a("h2",{attrs:{id:"sparse-merkle-tree"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sparse-merkle-tree"}}),e._v(" Sparse Merkle Tree")]),e._v(" "),a("p",[e._v("The data in a section is mapped using a Sparse Merkle Tree (SMT), making it efficient to add and remove archives into the Merkle tree.\nThe hash point into the DART is divided by rims. Rim zero is the most significant byte (MSB) of the hash fingerprint of the archive. Rim one is the next byte in the hash etc.\nIn the current implementation of the DART, the first two rims are used as the section index.\nThus the DART has a total number of indices "),a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/70DJZfd.png",loading:"lazy"}}),e._v(" which is equivalent to the two bytes unsigned number.\nEach section stores the archive in a hash table. An SMT is used as a look-up table, and each rim is sectioned into a sub sparse Merkle tree. It means that rim two is the first SMT and rim three is the second SMT etc.\nAs a comparison, a traditional Merkle tree with "),a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/ELvMoF6.png",loading:"lazy"}}),e._v(" Archives. To calculate a full Merkle tree, it requires the calculation of around"),a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/QYZBvc3.png",loading:"lazy"}}),e._v(" hashes. By contrast, using an SMT with"),a("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://i.imgur.com/gRZPQyV.png",loading:"lazy"}}),e._v("archives mean just around 2000 hashes have to be calculated.")]),e._v(" "),a("h3",{attrs:{id:"core-protocol-updates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core-protocol-updates"}}),e._v(" Core protocol updates")]),e._v(" "),a("p",[e._v("The DART will be used for protocol updates by the following consensus. One or more nodes will need to run the new protocol update in a parallel DART containing the same transaction information as the current accepted DART. The new DART will have a new Bull’s eye, resulting in a fork of the Bull’s eye chain. When the majority of the nodes run the newly upgraded nodes, they can decide to drop support for the old DART and run the new DART. When enough nodes stop running the old DART, it will not reach a consensus, and the upgrade has been completed.")]),e._v(" "),a("h3",{attrs:{id:"dart-garbage-collection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dart-garbage-collection"}}),e._v(" DART garbage collection")]),e._v(" "),a("p",[e._v("A garbage collection script will run every (G) epoch and remove all the bills older than a specified date. Bills that have not been used for a long period will be burned, ensuring that the system does not contain dead bills/money. It is the owner’s responsibility to recycle their bills before the expiry date.")])])}),[],!1,null,null,null);t.default=n.exports}}]);